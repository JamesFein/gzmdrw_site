!function e(t,a,o){function i(n,l){if(!a[n]){if(!t[n]){var d="function"==typeof require&&require;if(!l&&d)return d(n,!0);if(s)return s(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var c=a[n]={exports:{}};t[n][0].call(c.exports,(function(e){return i(t[n][1][e]||e)}),c,c.exports,e,t,a,o)}return a[n].exports}for(var s="function"==typeof require&&require,n=0;n<o.length;n++)i(o[n]);return i}({1:[function(e,t,a){"use strict";var o=u(e("./lib/pay")),i=u(e("./lib/premium-content")),s=u(e("./lib/premium-download")),n=u(e("../../../../themes/Themer/src/js/hidden-content")),l=u(e("./lib/copy")),d=u(e("./lib/message")),r=u(e("./lib/notification")),c=u(e("./lib/follow")),m=u(e("./lib/vip")),p=u(e("./lib/wallet"));function u(e){return e&&e.__esModule?e:{default:e}}jQuery((function(e){o.default.init(),i.default.init(),s.default.init(),m.default.init(),p.default.init();let t="undefined"!=typeof _wpmx_js?_wpmx_js:_wpcom_js;t&&t.copy_post&&l.default.init(),t&&t.hidden_content&&n.default.init(),"undefined"==typeof _wpcom_js&&(d.default.init(),r.default.init(),c.default.init())}))},{"../../../../themes/Themer/src/js/hidden-content":11,"./lib/copy":2,"./lib/follow":3,"./lib/message":4,"./lib/notification":5,"./lib/pay":6,"./lib/premium-content":7,"./lib/premium-download":8,"./lib/vip":9,"./lib/wallet":10}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){const e=navigator.userAgent.toLowerCase(),t=this;if(this.get_data(),this.ispaying=!1,jQuery(document).on("click",".btn-copy-post",(e=>{let t=jQuery(e.target).closest(".btn-copy-post");if(t.hasClass("loading"))return!1;t.loading(1),this.get_order_data(t)})).on("hide.bs.modal","#wpcom-copy-modal",(()=>{this.ispaying=!1})).on("click",".j-vip-copy",(function(){jQuery("#wpcom-copy-modal").modal("hide"),setTimeout((()=>{jQuery(document).trigger("vip.new")}),200)})),/(baiduboxapp|UCBrowser|MQQBrowser|Quark)/i.test(e)&&"ontouchstart"in window){let e=null;window.ontouchstart=function(){t.ispaying||(e=setTimeout((function(){t.is_paid||t.render()}),400))},window.ontouchmove=function(){clearTimeout(e)},window.ontouchend=function(){clearTimeout(e)}}else{let e=_wpmx_js.copy_post_container?_wpmx_js.copy_post_container:".entry-content";jQuery(document).on("copy",e,(e=>{this.is_paid||(e.preventDefault(),jQuery("body").hasClass("modal-open")||this.render())})).on("dragstart",e,(function(){if(!this.is_paid)return!1}))}},get_data(){let e=_wpmx_js||_wpcom_js;if(e.copy_post&&e.post_id){const t=this;jQuery.ajax({url:e.ajaxurl,data:{post_id:e.post_id,action:"wpcom_copy_post_init"},method:"POST",dataType:"json",success(e){e&&e.price&&(t.price=e.price),e&&e.vip_price&&(t.vip_price=e.vip_price),t.is_paid=e&&1==e.result,t.is_vip=e&&e.is_vip}})}},get_order_data(e){let t=_wpmx_js||_wpcom_js;return t.post_id&&jQuery.ajax({url:t.ajaxurl,data:{post_id:t.post_id,action:"wpcom_get_copy_post_data"},method:"POST",dataType:"json",success(t){e.loading(0),0==t.result?(jQuery(document).trigger("pay.wpcom",t),jQuery("#wpcom-copy-modal").modal("hide")):-1==t.result&&(jQuery("#wpcom-copy-modal").modal("hide"),jQuery(document).trigger("wpcom_not_login"),jQuery("#login-modal").modal())},error(){e.loading(0),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}}),null},render(){this.ispaying=!0,jQuery("#wpcom-copy-modal").remove();let e=_wpmx_js||_wpcom_js,t=e.copy_post_text?e.copy_post_text:"\u4ed8\u8d39\u89e3\u9501\u5f53\u524d\u6587\u7ae0\u590d\u5236\u6743\u9650",a=this.vip_price&&!this.is_vip?'<button type="button" class="btn btn-danger btn-lg j-vip-copy"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-vip-crown"></use></svg></i>\u4f1a\u5458\u89e3\u9501</button>':"",o='<div class="modal fade in" id="wpcom-copy-modal" data-backdrop="static">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div><h4 class="modal-title">\u4ed8\u8d39\u590d\u5236</h4>\n            </div>\n            <div class="modal-body">\n               '+('<div class="copy-post-desc"><div class="copy-post-icon"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-clipboard-lock"></use></svg></i></div><p class="copy-post-text">'+t+"</p>"+(this.price?'<div class="copy-post-price">\u672c\u6587\u89e3\u9501\u4ef7\u683c\uff1a<span>\xa5'+this.price+"</span></div>":"")+(this.vip_price?'<div class="copy-post-vip-price vip-price-notice">'+this.vip_price+"</div>":"")+"</div>")+'\n            </div>\n            <div class="modal-footer"><button type="button" class="btn btn-primary btn-lg btn-copy-post">\u7acb\u5373\u89e3\u9501</button>'+a+"</div>\n        </div>\n    </div>\n</div>";jQuery("body").append(o),jQuery("#wpcom-copy-modal").modal("show")}};a.default=o},{}],3:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){let e=this;jQuery(document).on("click",".j-follow",(function(t){e.follow(t)})).on("check_follow wpcom_login",(function(){e.check_follow()})).on("click",".profile-tab .profile-tab-item",(function(){let e=jQuery(this),t=e.closest(".wpcom-profile-main"),a=e.index();t.find(".profile-tab-item, .profile-tab-content").removeClass("active"),e.addClass("active"),t.find(".profile-tab-content").eq(a).addClass("active").trigger("profile_tab_show")})).on("profile_tab_show",".profile-tab-content",(function(){const e=jQuery(this);e.closest(".profile-follows").length&&e.find(".follow-items-loading").length&&e.find(".j-user-followers").trigger("click")}))},follow(e){if(!1===window.is_login)return jQuery("#login-modal").modal(),!1;let t=jQuery(e.target).closest(".j-follow");if(t.hasClass("loading"))return!1;var a=t.hasClass("followed"),o=t.data("user");o&&(t.loading(1),jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_follow",follow:o},dataType:"json",success(e){0==e.result?t.html(_wpmx_js.followed_btn).addClass("followed").removeClass("btn-primary"):1==e.result?t.html(_wpmx_js.follow_btn).removeClass("followed").addClass("btn-primary"):-1==e.result?(jQuery(document).trigger("wpcom_not_login"),jQuery("#login-modal").modal(),t.html(a?_wpmx_js.followed_btn:_wpmx_js.follow_btn)):(t.html(a?_wpmx_js.followed_btn:_wpmx_js.follow_btn),e.msg&&wpcom_alert(e.msg)),t.loading(0)},error(){t.html(a?_wpmx_js.followed_btn:_wpmx_js.follow_btn).loading(0)}}))},check_follow(){var e=[];jQuery(".j-follow").each((function(t,a){var o=jQuery(a).data("user");o&&jQuery.inArray(o,e)<0&&e.push(o)})),e.length&&jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_check_follow",ids:e},dataType:"json",success(t){if(t&&"object"==typeof t)for(var a in t)t[a]&&jQuery.inArray(a,e)&&jQuery(".j-follow[data-user="+a+"]").addClass("followed").removeClass("btn-primary").html(_wpmx_js.followed_btn)}})}};a.default=o},{}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){const e=this;this.checker=null,this.loader='<i class="wpcom-icon wi wpcom-icon-loader"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i>',this.error='<i class="wpcom-icon wi wpcom-icon-error"><svg aria-hidden="true"><use xlink:href="#wi-warning"></use></svg></i>',jQuery(document).on("click",".j-message",(function(t){e.load_box(t)})).on("click",".j-message-send",(function(t){e.send(t)})).on("input propertychange change",".j-message-text",(function(){let e=jQuery(this);jQuery.trim(e.val()).length?e.parent().find(".j-message-send").removeClass("disabled"):e.parent().find(".j-message-send").addClass("disabled")})).on("keydown",".j-message-text",(function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),e.returnValue=!1,jQuery(e.target).closest(".modal-content").find(".j-message-send").trigger("click"))}))},load_box(e){if(!1===window.is_login)return jQuery("#login-modal").modal(),!1;const t=this;let a=jQuery(e.target).closest(".j-message");if(a.hasClass("loading"))return!1;let o=a.data("user");o&&(a.loading(1),jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_message_box",user:o},dataType:"json",success(e,i,s){if(a.loading(0),a.find(".wi").show(),0==e.result){if(!jQuery("#message-modal").length){jQuery("body").append('<div class="modal modal-message fade" id="message-modal" data-backdrop="static">\n            <div class="modal-dialog">\n                <div class="modal-content"><div class="modal-header">\n                <div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>\n                <h4 class="modal-title"></h4>\n            </div>\n                    <div class="modal-body"><div class="modal-message-list"></div><div class="modal-message-editor"><textarea class="modal-message-text j-message-text"></textarea><div class="modal-message-send">\u6309 Enter \u952e\u53d1\u9001<button type="button" class="btn btn-primary btn-message disabled j-message-send">\u53d1\u9001</button></div></div></div>\n                </div>\n            </div>\n        </div>')}const i=jQuery("#message-modal");let n='<div class="modal-message-more">'+t.loader+"</div>",l=i.find(".modal-message-list"),d=e.to_uname?e.to_uname:" ";e.to_url&&(d='<a href="'+e.to_url+'" target="_blank">'+d+"</a>"),i.find(".modal-title").html(d).data("user",e.to_uid?e.to_uid:0),l.html(n+(e.messages?e.messages:"")),i.find(".j-message-send").data("avatar",e.avatar),i.modal("show").find(".j-message-text").val(""),setTimeout((function(){i.find(".j-message-text").focus()}),500),"0"===s.getResponseHeader("Next-page")&&i.find(".modal-message-more").remove(),setTimeout((function(){let e=i.find(".modal-message-item:last-child")[0];e&&e.scrollIntoView(),t.load_more(i,o)}),200),t.set_read(o,a),t.checker&&clearInterval(t.checker),t.checker=setInterval((function(){t.check_messages(i,o)}),1e4),i.on("hide.bs.modal",(function(){clearInterval(t.checker)}))}else-1==e.result?(jQuery(document).trigger("wpcom_not_login"),jQuery("#login-modal").modal()):-3==e.result&&e.msg&&wpcom_alert(e.msg)},error(){a.loading(0),a.find(".wi").show()}}))},send(e){let t=jQuery(e.target).closest(".j-message-send");if(t.hasClass("disabled"))return;let a=t.closest(".modal-content"),o=a.find(".modal-message-list"),i=jQuery.trim(a.find(".j-message-text").val()),s=a.find(".modal-title").data("user"),n=this;if(i){n.checker&&clearInterval(n.checker),n.checker=setInterval((function(){n.check_messages(a,s)}),1e4);var l=jQuery('<div class="modal-message-item message-sender"><div class="modal-message-time"></div><div class="modal-message-inner"><div class="modal-message-status">'+n.loader+'</div><div class="modal-message-content"><div class="message-text"></div></div><div class="modal-message-avatar"><img src="'+t.data("avatar")+'"></div></div></div>');l.find(".message-text").text(i);var d=o.find(".modal-message-item:last-child"),r=d.length?d.data("id"):0;o.append(l),a.find(".j-message-text").val("").trigger("input"),setTimeout((function(){o.animate({scrollTop:o.prop("scrollHeight")},150)}),100),jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_send_message",to:s,content:i,last:r},dataType:"json",success(e){try{0===e.result?e.messages?(l.replaceWith(e.messages),o.animate({scrollTop:o.prop("scrollHeight")},150)):(l.data("id",e.message_id).find(".modal-message-status").html(""),l.find(".modal-message-time").html(e.message_time),e.message_content&&l.find(".modal-message-content .message-text").html(e.message_content)):-1===e.result?(jQuery(document).trigger("wpcom_not_login"),a.closest(".modal").modal("hide"),setTimeout((function(){jQuery("#login-modal").modal("show")}),100)):-3===e.result?(e.msg&&wpcom_alert(e.msg),l.remove()):l.find(".modal-message-status").html(n.error)}catch(e){l.find(".modal-message-status").html(n.error)}},error(){l.find(".modal-message-status").html(n.error)}})}else wpcom_notice({message:"\u79c1\u4fe1\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a",type:"warning",show:1500})},load_more(e,t){let a=0,o=e.find(".modal-message-list"),i=e.find(".modal-message-more");o.off("scroll.message").on("scroll.message",(function(s){if(s.target.scrollTop<=20&&s.target.scrollTop<a&&(i=e.find(".modal-message-more"),i.length&&!i.hasClass("active"))){i.addClass("active");var n=e.find(".modal-message-item").first(),l=n.length?n.data("id"):0;jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_load_messages",user:t,last:l},dataType:"html",success(e,t,a){if(e){var s=n.offset().top-o.scrollTop();i.after(e),o.scrollTop(n.offset().top-s)}i.removeClass("active"),"0"===a.getResponseHeader("Next-page")&&i.remove()},error(){i.removeClass("active")}})}a=s.target.scrollTop}))},set_read(e,t){jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_read_messages",user:e},dataType:"html",success(e){e>0&&t&&t.find(".messages-item-unread").length&&t.find(".messages-item-unread").remove()}})},check_messages(e,t){const a=this,o=e.find(".modal-message-list");let i=o.find(".modal-message-item:last-child"),s=i.length?i.data("id"):0;jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_check_messages",user:t,last:s},dataType:"json",success(e){0===e.result&&e.messages&&(o.append(e.messages),a.set_read(t),o.animate({scrollTop:o.prop("scrollHeight")},150))}})}};a.default=o},{}],5:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){const e=this;jQuery(".notify-list").on("click",".j-notification .notify-item-title a",(function(t){t.preventDefault();const a=jQuery(this).closest(".j-notification");if(a.closest(".notify-item").find(".panel-collapse").toggleClass("in"),!a.hasClass("status-1")){let t=a.data("id");e.set_read(a,t)}}))},set_read(e,t){jQuery.ajax({type:"POST",url:_wpmx_js.ajaxurl,data:{action:"wpcom_read_notification",id:t},dataType:"html",success(t){t&&e.removeClass("status-0").addClass("status-1")}})}};a.default=o},{}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){jQuery(document).on("pay.wpcom",((e,t)=>{t.order_id||(t.order_id=0),Object.assign(this,t),this.render()})).on("click","#wpcom-pay-modal .payment-methods-item",(e=>{let t=jQuery(e.target).closest(".payment-methods-item");t.closest(".payment-methods-list").find(".payment-methods-item").removeClass("active"),t.addClass("active"),this.payment_gateway=t.data("payment")})).on("click","#wpcom-pay-modal .btn-pay",(e=>{let t=jQuery(e.target).closest(".btn-pay");if(t.loading(1),this.payment_gateway||(this.payment_gateway=t.closest("#wpcom-pay-modal").find("a.payment-methods-item.active").data("payment")),!this.payment_gateway){let e="\u8bf7\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f\uff01";"undefined"!=typeof wpcom_alert?wpcom_alert(e):alert(e)}this.setup_order(t)})).on("hidden.bs.modal","#wpcom-pay-modal",(function(){jQuery("#wpcom-pay-modal").find(".modal-body").html("")})).on("click",".account-orders-item .btn-pay, .member-account-order .btn-pay",(function(){let e=jQuery(this),t=e.data("id");t&&(e.loading(1),jQuery.ajax({url:_wpmx_js?_wpmx_js.ajaxurl:_wpcom_js.ajaxurl,data:{order_id:t,action:"wpcom_get_order_payment"},method:"POST",dataType:"json",success(t){if(e.loading(0),0==t.result){if(t.items&&t.items.length)for(let e=0;e<t.items.length;e++)void 0!==t.items[e].data&&""!==t.items[e].data&&(t.items[e].data=JSON.parse(t.items[e].data));jQuery(document).trigger("pay.wpcom",t)}else-1==t.result&&(jQuery(document).trigger("wpcom_not_login"),jQuery("#login-modal").modal())},error(){e.loading(0),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}}))})),window.addEventListener("message",(function(e){if(e.origin!==window.location.origin)return!1;e.data&&e.data.return_url&&jQuery("#wpcom-pay-modal .modal-footer").find("button.btn-primary").replaceWith('<a href="'+e.data.return_url+'" class="btn btn-primary btn-sm">\u5df2\u5b8c\u6210\u652f\u4ed8</a>')}),!1)},setup_payment(){const e=this;let t={action:"wpcom_setup_payment"};this.items&&this.items.length&&this.items[0].type&&"wallet"===this.items[0].type&&(t.order_type="wallet"),jQuery.ajax({url:_wpmx_js?_wpmx_js.ajaxurl:_wpcom_js.ajaxurl,data:t,method:"POST",dataType:"json",success(t){let a="",o=t&&t.gateways?t.gateways:[];if(e.payment_form_nonce=t.nonce,e.gateways=o,e.help_url=t.help_url,"[]"!==JSON.stringify(o)&&"{}"!==JSON.stringify(o))for(let e in o)o[e].id&&"wallet"===o[e].id?(a+='<li class="payment-methods-item payment-methods-'+o[e].id+'" data-payment="'+o[e].id+'">',a+='<i class="wpcom-icon wi" style="color: '+o[e].color+'">'+o[e].icon+"</i>",a+='<div class="payment-wallet-info"><h4>'+o[e].title+"</h4><span>\u4f59\u989d\uffe5"+o[e].balance+"</span></div>",a+="</li>"):o[e].id&&(a+='<li class="payment-methods-item payment-methods-'+o[e].id+'" data-payment="'+o[e].id+'"><image src="'+o[e].icon+'" alt="'+o[e].title+'"></li>');const i=jQuery("#wpcom-pay-modal");a?(i.find(".payment-methods-list").html(a).find(".payment-methods-item").eq(0).trigger("click"),i.find(".btn-pay").removeClass("loading")):setTimeout((function(){i.modal("hide"),setTimeout((function(){let e="\u8ba2\u5355\u521d\u59cb\u5316\u5931\u8d25\uff1a\u6682\u65e0\u6709\u6548\u7684\u652f\u4ed8\u65b9\u5f0f";"undefined"!=typeof wpcom_notice?wpcom_notice({message:e,type:"error",show:1500}):alert(e)}),300)}),300)},error(){$modal.modal("hide"),setTimeout((function(){let e="\u8ba2\u5355\u521d\u59cb\u5316\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01";"undefined"!=typeof wpcom_notice?wpcom_notice({message:e,type:"error",show:1500}):alert(e)}),300)}})},render(){let e=jQuery("#wpcom-pay-modal");if(e.length&&e.html(""),this.items&&this.items.length){let t='<ul class="payment-items"><li class="payment-item payment-item-head"><div class="payment-item-title">\u5546\u54c1\u540d\u79f0</div><div class="payment-item-num">\u6570\u91cf</div><div class="payment-item-price">\u4ea4\u6613\u91d1\u989d</div></li>';this.items.map((e=>{let a=e.title;e.url&&(a='<a href="'+e.url+'" target="_blank">'+a+"</a>");let o="<b>"+(e.number?e.number:1)+"</b>";e.unit&&(o+=e.unit);let i="\xa5"+e.price;t+='<li class="payment-item"><div class="payment-item-title">'+a+'</div><div class="payment-item-num">'+o+'</div><div class="payment-item-price">'+i+"</div></li>"})),t+='<li class="payment-item payment-item-total"><div class="payment-item-title">\u5408\u8ba1</div><div class="payment-item-num"> </div><div class="payment-item-price">\xa5'+this.total+"</div></li>",t+="</ul>",t+='<div class="payment-methods"><h3 class="payment-methods-title">\u652f\u4ed8\u65b9\u5f0f</h3>',t+='<ul class="payment-methods-list">',t+='<li class="payment-methods-loading"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i> \u6b63\u5728\u521d\u59cb\u5316...</li>',t+="</ul>",t+="</div>";let a='<div class="modal fade in" id="wpcom-pay-modal" data-backdrop="static">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div><h4 class="modal-title">\u6536\u94f6\u53f0</h4>\n            </div>\n            <div class="modal-body">\n               '+t+'\n            </div>\n            <div class="modal-footer"><button type="button" class="btn btn-primary btn-pay loading">\u63d0\u4ea4\u8ba2\u5355</button></div>\n        </div>\n    </div>\n</div>';e.length?e.replaceWith(a):jQuery("body").append(a),jQuery("#wpcom-pay-modal").modal("show"),this.setup_payment()}},setup_order(e){let t=jQuery("#wpcom-pay-modal");if(!(this.gateways&&this.gateways[this.payment_gateway]&&this.gateways[this.payment_gateway].modal)){let e=(_wpmx_js?_wpmx_js.ajaxurl:_wpcom_js.ajaxurl)+"?action=wpcom_checkout_payment",a={order_id:this.order_id?this.order_id:0,items:this.items,total:this.total,gateway:this.payment_gateway,sign:this.sign,timestamp:this.timestamp,nonce:this.payment_form_nonce};this.open_window(e,a),t.find(".modal-dialog").attr("class","modal-dialog modal-sm"),t.find(".modal-body").html('<p style="font-weight:400;font-size: 14px;">\u8bf7\u5728\u65b0\u5f00\u7684\u9875\u9762\u5b8c\u6210\u652f\u4ed8</p>');let o='<button type="button" class="btn btn-primary btn-sm" data-dismiss="modal">\u597d\u7684</button>';return this.help_url&&(o+='<a href="'+this.help_url+'" class="btn btn-normal btn-sm">\u652f\u4ed8\u9047\u5230\u95ee\u9898</a>'),t.find(".modal-footer").html(o),!1}jQuery.ajax({url:_wpmx_js?_wpmx_js.ajaxurl:_wpcom_js.ajaxurl,data:{action:"wpcom_setup_order",order_id:this.order_id?this.order_id:0,items:this.items,total:this.total,gateway:this.payment_gateway,sign:this.sign,timestamp:this.timestamp,nonce:this.payment_form_nonce},method:"POST",dataType:"json",success(a){if(e.loading(0),0==a.result){let e=t[0].getAttribute("style");e=(e||"")+"--payment-color:"+a.color+";",t[0].setAttribute("style",e),t.css("--payment-color",a.color),t.find(".modal-body").html('<div class="wpcom-pay-loading"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i></div>');let o=a.height?a.height:"300px",i='<iframe class="wpcom-pay-iframe" id="wpcom-pay-iframe" src="'+a.redirect+'" style="height:'+o+'">';t.find(".modal-body").append(i),t.find(".modal-footer").hide(),a["modal-size"]&&t.find(".modal-dialog").attr("class","modal-dialog modal-pay "+a["modal-size"])}else a.msg&&("undefined"!=typeof wpcom_notice?wpcom_notice({message:a.msg,type:"warning",show:1500}):wpcom_alert(a.msg))},error(){e.loading(0)}})},open_window(e,t){let a=document.createElement("form");a.action=e,window.navigator.userAgent.match(/MicroMessenger|iPhone|iOS|iPad|Android/i)?a.target="_self":a.target="_blank",a.method="post",a.style.display="none",a=this.loop_args(t,a),document.body.appendChild(a),a.submit()},loop_args(e,t,a){for(let o in e){let i=a?a+"["+o+"]":o;if("object"==typeof e[o])t=this.loop_args(e[o],t,i);else{let a=document.createElement("textarea");a.name=i,a.value=e[o],t.appendChild(a)}}return t}};a.default=o},{}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){const e=this;jQuery((function(t){e.$=t,e.load_content(),t(".hidden-content-wrap").on("click",".j-refresh-premium-content",(function(){const a=t(this);a.addClass("loading"),e.load_content((function(){a.removeClass("loading")}))})),t(".wp-block-wpcom-premium-content").on("click",".premium-content-btn",(a=>{let o=t(a.target).closest(".premium-content-btn");o.loading(1);let i=o.closest(".hidden-content-wrap").attr("id");e.get_order_data(i,o)})),t(".wp-block-wpcom-virtual-service").on("click",".virtual-service-btn",(a=>{let o=t(a.target).closest(".virtual-service-btn");o.loading(1);let i=o.closest(".hidden-content-wrap").attr("id");e.get_order_data(i,o)}))}))},load_content(e){const t=this.$;let a=_wpmx_js||_wpcom_js;const o=t(".wp-block-wpcom-premium-content .hidden-content-wrap");o.length&&(o.addClass("loading"),0===o.find(".hidden-content-loading").length&&o.append('<i class="wpcom-icon wi hidden-content-loading"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i>'),t.ajax({url:a.ajaxurl,data:{post_id:a.post_id?a.post_id:"",action:"wpcom_get_premium_content"},method:"POST",dataType:"json",success(a){if(a)for(let e in a){let o=t("#"+e).parent();o.html(a[e]),o.find(".j-map").length&&t(document).trigger("wpcom.map"),o.find(".wp-block-wpcom-accordion").length&&o.find(".wp-block-wpcom-accordion").collapse("show"),o.find(".wp-block-wpcom-hljs > pre").length&&o.find(".wp-block-wpcom-hljs > pre").trigger("hljs.wpcom"),t(document).trigger("wpcom.lightbox",[o]),/^post-premium-content-[\d]+$/.test(e)&&t(".entry-content .wpcom-unlock-more").remove()}o.removeClass("loading"),e&&e()},error(){o.removeClass("loading"),e&&e()}}))},get_order_data(e,t){const a=this.$;let o=_wpmx_js||_wpcom_js;if(e&&o.post_id){let i=t.hasClass("virtual-service-btn")?"wpcom_get_virtual_service_data":"wpcom_get_premium_content_data";a.ajax({url:o.ajaxurl,data:{post_id:o.post_id,id:e,action:i},method:"POST",dataType:"json",success(e){t.loading(0),0==e.result?a(document).trigger("pay.wpcom",e):-1==e.result?(jQuery(document).trigger("wpcom_not_login"),jQuery("#login-modal").modal()):wpcom_notice({message:e.msg?e.msg:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"warning",show:1500})},error(){t.loading(0),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}})}return null}};a.default=o},{}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){const e=this;jQuery((function(t){e.$=t,e.load_content("premium"),e.load_content("hidden"),t(".hidden-content-wrap").on("click",".j-refresh-premium-download",(function(){const a=t(this);a.addClass("loading"),e.load_content("premium",(function(){a.removeClass("loading")}))})).on("click",".j-refresh-hidden-download",(function(){const a=t(this);a.addClass("loading"),e.load_content("hidden",(function(){a.removeClass("loading")}))})).on("click",".hidden-download-btn-password",(function(){const a=t(this).parent(),o=a.closest(".hidden-content-wrap");let i=a.find('input[name="password"]').val();if(i){let t=o.attr("id");e.load_content("hidden",(function(e){t&&void 0!==e&&void 0===e[t]?wpcom_notice?wpcom_notice({message:"\u89e3\u9501\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u53e3\u4ee4\u662f\u5426\u6b63\u786e",type:"warning",show:1800}):wpcom_alert("\u89e3\u9501\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u53e3\u4ee4\u662f\u5426\u6b63\u786e"):void 0===e&&(wpcom_notice?wpcom_notice({message:"\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"warning",show:1800}):wpcom_alert("\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"))}),i,t)}else a.addClass("error")})).on("input change",'.hidden-download-input input[name="password"]',(function(){t(this).parent().removeClass("error")})),t(".wp-block-wpcom-premium-download,.widget_wpmx_premium_download").on("click",".premium-download-btn",(a=>{let o=t(a.target).closest(".premium-download-btn");o.loading(1);let i=o.closest(".hidden-content-wrap").attr("id");i=i.replace(/^widget-/i,""),e.get_order_data(i,o)})),t(".wp-block-wpcom-premium-download,.wp-block-wpcom-hidden-download,.widget_wpmx_premium_download").on("click",".wpcom-premium-download-action .btn[data-code]",(function(e){e.preventDefault();let a=t(this),o=a.data("code"),i=a.attr("href"),s=t("#wpcom-download-modal");if(s.length)s.modal("show");else{let e='<div class="modal fade modal-alert" id="wpcom-download-modal" data-backdrop="static">\n            <div class="modal-dialog modal-sm">\n                <div class="modal-content">                   <div class="modal-header"><div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div><h4 class="modal-title">\u4e0b\u8f7d\u4fe1\u606f</h4></div>\n                   <div class="modal-body premium-download-modal"><div class="premium-download-modal-left">'+'<svg xmlns="http://www.w3.org/2000/svg" data-name="Layer 1" width="733.862" height="702.195" viewBox="0 0 733.862 702.195"><path d="M24.006 434.257a1.115 1.115 0 0 1-.236-.462A351.191 351.191 0 0 1 502.71 28.05a1.12 1.12 0 1 1-.876 2.061C379.257-22.012 240.164-.77 138.837 85.547 38.128 171.337-5.128 304.575 25.948 433.269a1.12 1.12 0 0 1-1.942.988zM228.727 674.583a1.12 1.12 0 0 1 1.285-1.76c122.117 51.142 260.54 29.618 361.25-56.174 102.28-87.128 145.715-221.061 113.354-349.531a1.12 1.12 0 0 1 2.172-.546 346.596 346.596 0 0 1-5.75 189.354 353.672 353.672 0 0 1-108.323 162.428 351.074 351.074 0 0 1-363.57 56.535 1.113 1.113 0 0 1-.418-.306z" fill="#e6e6e6"/><path d="M202.846 694.461a1.12 1.12 0 0 1 .126-1.579l529.044-450.671a1.12 1.12 0 1 1 1.453 1.705L204.424 694.587a1.12 1.12 0 0 1-1.578-.126zM.268 456.654a1.12 1.12 0 0 1 .126-1.578L529.438 4.404a1.12 1.12 0 0 1 1.452 1.705L1.846 456.78a1.12 1.12 0 0 1-1.578-.126z" fill="#e6e6e6"/><path d="M202.846 694.461a1.12 1.12 0 0 1 .126-1.579l529.044-450.671a1.12 1.12 0 1 1 1.453 1.705L204.424 694.587a1.12 1.12 0 0 1-1.578-.126z" fill="#e6e6e6"/><path d="M618.532 185.751H413.775v-1.072a3.148 3.148 0 0 0-3.148-3.148H324.08a3.148 3.148 0 0 0-3.148 3.148v1.072h-205.6a13.85 13.85 0 0 0-13.851 13.85v280.375a13.85 13.85 0 0 0 13.85 13.85h503.202a13.85 13.85 0 0 0 13.85-13.85V199.601a13.85 13.85 0 0 0-13.85-13.85z" fill="#3f3d56"/><path d="M126.345 215.228a1.298 1.298 0 0 0-1.296 1.297v265.942a1.297 1.297 0 0 0 1.296 1.295h481.172a1.297 1.297 0 0 0 1.296-1.295V216.525a1.297 1.297 0 0 0-1.296-1.297z" fill="var(--member-color,var(--theme-color))"/><circle cx="366.509" cy="197.568" r="5.064" fill="var(--member-color,var(--theme-color))"/><path d="M641.604 474.93h-48.188v-4.976c0-.274-.309-.495-.689-.495h-16.521c-.38 0-.689.221-.689.495v4.976h-10.326v-4.976c0-.274-.308-.495-.688-.495H547.98c-.38 0-.688.221-.688.495v4.976h-10.326v-4.976c0-.274-.309-.495-.689-.495h-16.521c-.38 0-.689.221-.689.495v4.976h-10.326v-4.976c0-.274-.308-.495-.688-.495h-16.522c-.38 0-.688.221-.688.495v4.976h-10.326v-4.976c0-.274-.309-.495-.689-.495h-16.522c-.38 0-.688.221-.688.495v4.976h-10.326v-4.976c0-.274-.308-.495-.688-.495h-16.522c-.38 0-.688.221-.688.495v4.976h-10.326v-4.976c0-.274-.309-.495-.689-.495H293.96c-.38 0-.688.221-.688.495v4.976h-10.326v-4.976c0-.274-.308-.495-.688-.495h-16.522c-.38 0-.689.221-.689.495v4.976h-10.326v-4.976c0-.274-.308-.495-.688-.495h-16.522c-.38 0-.688.221-.688.495v4.976h-10.326v-4.976c0-.274-.308-.495-.689-.495h-16.521c-.38 0-.689.221-.689.495v4.976h-10.326v-4.976c0-.274-.308-.495-.688-.495h-16.522c-.38 0-.688.221-.688.495v4.976h-10.326v-4.976c0-.274-.308-.495-.689-.495h-16.521c-.38 0-.689.221-.689.495v4.976h-10.326v-4.976c0-.274-.308-.495-.688-.495h-16.522c-.38 0-.688.221-.688.495v4.976H92.258c-9.124 0-16.521 5.318-16.521 11.877v5.37c0 6.56 7.397 11.877 16.521 11.877h549.346c9.125 0 16.522-5.317 16.522-11.877v-5.37c0-6.56-7.397-11.877-16.522-11.877z" fill="#3f3d56"/><path d="M310.91 327.114H168.685a1.12 1.12 0 1 1 0-2.24h142.223a1.12 1.12 0 1 1 0 2.24zM310.91 351.752H168.685a1.12 1.12 0 1 1 0-2.24h142.223a1.12 1.12 0 1 1 0 2.24zM310.91 376.389H168.685a1.12 1.12 0 1 1 0-2.24h142.223a1.12 1.12 0 1 1 0 2.24z" fill="#f2f2f2"/><rect x="373.062" y="262.722" width="182.539" height="175.82" rx="3.36" fill="#fff"/><path d="M409.614 355.771a45.006 45.006 0 0 1 88.303-9.489c.545-.02 1.09-.041 1.64-.041a17.667 17.667 0 0 1 5.515.938c22.387 7.351 16.492 40.775-7.071 40.775h-57.91a30.442 30.442 0 0 1-30.509-31.52q.014-.33.032-.663z" fill="var(--member-color,var(--theme-color))"/><path fill="#fff" d="M462.397 355.07v-18.421h-9.919v18.421h-7.919l6.439 11.154 6.44 11.153 6.439-11.153 6.439-11.154h-7.919z"/></svg>'+'</div><div class="premium-download-modal-right"><div class="premium-download-modal-item"><div class="premium-download-modal-label">\u4e0b\u8f7d\u5730\u5740</div><div class="premium-download-modal-input"><a href="'+i+'" target="_blank">'+i+'</a></div></div><div class="premium-download-modal-item"><div class="premium-download-modal-label">\u63d0\u53d6\u7801/\u53e3\u4ee4</div><div class="premium-download-modal-input"><a class="j-premium-download-copy-code" href="javascript:;" data-code="'+o+'">'+o+'</a></div></div></div></div>\n                   <div class="modal-footer premium-download-modal-footer" style="text-align:center;"><button type="button" class="btn btn-copy-code btn-round btn-sm j-premium-download-copy-code" data-code="'+o+'"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-copy"></use></svg></i> \u590d\u5236\u63d0\u53d6\u7801/\u53e3\u4ee4</button><a class="btn btn-primary btn-round btn-sm" href="'+i+'" target="_blank">\u524d\u5f80\u4e0b\u8f7d <i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-arrow-right-2"></use></svg></i></a></div>                </div>\n            </div>\n        </div>';t("body").append(e)}t("#wpcom-download-modal").modal("show")})),t(document.body).on("click",".j-premium-download-copy-code",(function(){if(void 0!==document.execCommand){let e=t(this).data("code"),a=document.createElement("textarea");a.value=e,t("body").append(a),a.style.position="fixed",a.style.height=0,a.select(),document.execCommand("copy"),a.remove(),wpcom_notice?wpcom_notice({message:"\u63d0\u53d6\u7801/\u53e3\u4ee4\u590d\u5236\u6210\u529f\uff01",show:1500}):wpcom_alert("\u63d0\u53d6\u7801/\u53e3\u4ee4\u590d\u5236\u6210\u529f\uff01")}else wpcom_notice?wpcom_notice({message:"\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u624b\u52a8\u9009\u62e9\u590d\u5236",type:"warning",show:1500}):wpcom_alert("\u6d4f\u89c8\u5668\u6682\u4e0d\u652f\u6301\u590d\u5236\u529f\u80fd\uff0c\u8bf7\u624b\u52a8\u9009\u62e9\u590d\u5236")}))}))},load_content(e,t,a,o){const i=this.$;let s=_wpmx_js||_wpcom_js;const n=i(".wp-block-wpcom-"+e+"-download .hidden-content-wrap, .widget_wpmx_"+e+"_download .hidden-content-wrap");if(n.length){n.addClass("loading"),0===n.find(".hidden-content-loading").length&&n.append('<i class="wpcom-icon wi hidden-content-loading"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i>');let l={post_id:s.post_id?s.post_id:"",action:"wpcom_get_"+e+"_download"};a&&(l.password=a,l.id=o),i.ajax({url:s.ajaxurl,data:l,method:"POST",dataType:"json",success(e){if(e)for(let t in e){let a=i("#"+t).parent(),o="";for(let a in e[t]){let i=e[t][a].title?e[t][a].title:"\u70b9\u51fb\u4e0b\u8f7d";o+='<a class="btn btn-primary btn-round btn-block btn-sm" href="'+e[t][a].url+'" target="_blank"',e[t][a].code&&(o+=' data-code="'+e[t][a].code+'"'),o+=">"+i+"</a>"}if(a.find(".wpcom-premium-download-action").html(o),a.find(".hidden-content-refresh").hide(),/^post-/i.test(t)&&i("#widget-"+t).length){let a=i("#widget-"+t).parent(),o="";for(let a in e[t]){let i=e[t][a].title?e[t][a].title:"\u70b9\u51fb\u4e0b\u8f7d";o+='<a class="btn btn-primary" href="'+e[t][a].url+'" target="_blank"',e[t][a].code&&(o+=' data-code="'+e[t][a].code+'"'),o+=">"+i+"</a>"}a.find(".wpcom-premium-download-action").html(o),a.find(".hidden-content-refresh").hide()}}n.removeClass("loading"),t&&t(e)},error(){n.removeClass("loading"),t&&t()}})}},get_order_data(e,t){const a=this.$;let o=_wpmx_js||_wpcom_js;return e&&o.post_id&&a.ajax({url:o.ajaxurl,data:{post_id:o.post_id,id:e,action:"wpcom_get_premium_download_data"},method:"POST",dataType:"json",success(e){t.loading(0),0==e.result?a(document).trigger("pay.wpcom",e):-1==e.result&&(jQuery(document).trigger("wpcom_not_login"),jQuery("#login-modal").modal())},error(){t.loading(0),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}}),null}};a.default=o},{}],9:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init:function(){let e=this;jQuery(document).on("wpcom_login",(function(e,t){if(t&&t.vip&&t.vip.icon){jQuery("#j-user-wrap").find(".menu-item-user").append('<img class="vip-flag" src="'+t.vip.icon+'" alt="'+t.vip.title+'">').addClass("has-vip-flag")}})).on("vip.new",(function(t,a){e.open_modal("new"),a&&void 0!==a.callback&&a.callback()})).on("vip.renew",(function(t,a){!1===window.is_login?jQuery("#login-modal").modal():e.open_modal("renew"),a&&void 0!==a.callback&&a.callback()})).on("vip.upgrade",(function(t,a){!1===window.is_login?jQuery("#login-modal").modal():e.open_modal("upgrade"),a&&void 0!==a.callback&&a.callback()})).on("click",".j-vip-new",(function(e){e.preventDefault(),jQuery(this).loading(1),jQuery(document).trigger("vip.new",{callback:()=>{jQuery(this).loading(0)}})})).on("click",".j-vip-renew",(function(e){e.preventDefault(),jQuery(this).loading(1),jQuery(document).trigger("vip.renew",{callback:()=>{jQuery(this).loading(0)}})})).on("click",".j-vip-upgrade",(function(e){e.preventDefault(),jQuery(this).loading(1),jQuery(document).trigger("vip.upgrade",{callback:()=>{jQuery(this).loading(0)}})})).on("click",".vip-form-types-item",(function(){let t=jQuery(this).data("id");e.select_type(t)})).on("click",".vip-form-time-item",(function(){let t=jQuery(this).data("time");e.select_lifetime(t)})).on("click",".btn-vip-form",(function(){let t=jQuery(this);if(t.hasClass("disabled"))return!1;let a=t.closest(".vip-form-wrap"),o={action_type:a.find("input[name=action_type]").val(),vip_type:a.find("input[name=vip_type]").val(),vip_lifetime:a.find("input[name=vip_lifetime]").val()};t.loading(1),e.get_order_data(o,t)}))},get_order_data(e,t){e.action="wpcom_get_vip_data",jQuery.ajax({url:_wpmx_js?_wpmx_js.ajaxurl:_wpcom_js.ajaxurl,data:e,method:"POST",dataType:"json",success:function(e){t.loading(0),0==e.result?(jQuery(document).trigger("pay.wpcom",e),jQuery("#wpcom-vip-modal").modal("hide")):-1==e.result?(jQuery("#wpcom-vip-modal").modal("hide"),jQuery(document).trigger("wpcom_not_login"),jQuery("#login-modal").modal()):e.msg&&wpcom_alert(e.msg)},error:function(){t.loading(0),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}})},open_modal(e){const t=this;e=e||"new";let a='<div class="payment-methods-loading"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i> \u52a0\u8f7d\u4e2d...</div>',o=jQuery("#wpcom-vip-modal");if(o.length)o.find(".modal-body").html(a);else{let e='<div class="modal fade in" id="wpcom-vip-modal" data-backdrop="static">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>\n            </div>\n            <div class="modal-body">\n               '+a+"\n            </div>\n        </div>\n    </div>\n</div>";jQuery("body").append(e),o=jQuery("#wpcom-vip-modal")}o.modal("show"),jQuery.ajax({url:_wpmx_js.ajaxurl,data:{action:"wpcom_vip_modal",type:e},method:"POST",dataType:"json",success(e){e.result&&-1==e.result?(jQuery(document).trigger("wpcom_not_login"),setTimeout((()=>{o.modal("hide"),jQuery("#login-modal").modal()}),180)):e.tpl&&e.data?(o.find(".modal-body").html(e.tpl),t.data=e.data,t.timestamp=e.timestamp,t.select_type()):(o.modal("hide"),e.msg&&wpcom_notice({message:e.msg,type:"warning",show:1500}))},error(){o.modal("hide"),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}})},select_type(e){let t=jQuery(".vip-form-wrap .vip-form-types-item"),a=jQuery(".vip-form-wrap").find("input[name=action_type]").val();if(void 0===e&&t.length?e=t.eq(0).data("id"):void 0===e&&"renew"===a&&(e=jQuery(".vip-form-wrap input[name=vip_type]").val()),e&&this.data[e]){let o=this.data[e];if(t.removeClass("active"),jQuery(".vip-form-wrap .vip-form-types-item[data-id="+e+"]").addClass("active"),jQuery(".vip-form-wrap input[name=vip_type]").val(e),"upgrade"!==a){let e={month:"\u6708\u4ed8",year:"\u5e74\u4ed8",lifetime:"\u7ec8\u8eab"},t="";if(o.time)for(let a in o.time)o.time[a]&&e[o.time[a]]&&(t+='<div class="vip-form-select-item vip-form-time-item" data-time="'+o.time[a]+'">'+e[o.time[a]]+"</div>");t&&jQuery(".vip-form-item-lifetime .vip-form-input").html('<div class="vip-form-select">'+t+"</div>"),this.select_lifetime()}else this.set_expire_time(e);o.description=o.description?o.description:"/",jQuery(".vip-form-item-desc .vip-form-input").html(o.description)}},select_lifetime(e){let t=jQuery(".vip-form-wrap .vip-form-time-item");if(void 0===e&&t.length&&(e=t.eq(0).data("time")),e){t.removeClass("active"),jQuery(".vip-form-wrap .vip-form-time-item[data-time="+e+"]").addClass("active"),jQuery(".vip-form-wrap input[name=vip_lifetime]").val(e);let a=jQuery(".vip-form-wrap input[name=vip_type]").val(),o=this.data[a]&&this.data[a][e+"_price"]?"\xa5"+this.data[a][e+"_price"]:"";jQuery(".btn-vip-form span").html(o),"lifetime"===e?jQuery(".vip-form-item-expire .vip-form-input").html("\u65e0\u65f6\u95f4\u9650\u5236"):this.timestamp&&this.set_expire_time(e)}},set_expire_time(e){if(this.timestamp){let t=new Date(1e3*this.timestamp);"month"===e?t.setDate(t.getDate()+31):"year"===e&&t.setFullYear(t.getFullYear()+1);let a=t.getMonth()+1;a=a<10?"0"+a:a;let o=t.getDate();o=o<10?"0"+o:o;let i=t.getFullYear()+"\u5e74"+a+"\u6708"+o+"\u65e5";"9999"==t.getFullYear()&&(i="\u7ec8\u8eab"),jQuery(".vip-form-item-expire .vip-form-input").html(i)}let t=jQuery(".vip-form-wrap input[name=vip_type]").val();if(this.data[t]&&void 0!==this.data[t].upgrade_price){let e="";this.data[t].upgrade_price?(e="\xa5"+this.data[t].upgrade_price,jQuery(".btn-vip-form").removeClass("disabled")):jQuery(".btn-vip-form").addClass("disabled"),jQuery(".btn-vip-form span").html(e)}}};a.default=o},{}],10:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init(){jQuery(document.body).on("click",".member-account-content .btn-recharge",(e=>{!1===window.is_login?jQuery("#login-modal").modal():this.recharge_modal()})).on("click",".recharge-types-item",(e=>{let t=jQuery(e.target).closest(".recharge-types-item").data("type");this.select_type(t)})).on("submit","form.recharge-form-inner",(e=>{let t=jQuery(e.target).closest("form"),a=t.find("input[name=recharge-form-type]"),o=t.find("input[name=recharge-form-input]");if(a.length&&o.length){let e=a.val();"t1"===e?this.for_t1(o.val(),t):"t2"===e&&this.for_t2(o.val(),t)}else wpcom_notice({message:"\u63d0\u4ea4\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01",type:"error",show:1500});return!1}))},recharge_modal(){let e='<div class="payment-methods-loading"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i> \u52a0\u8f7d\u4e2d...</div>',t=jQuery("#wpcom-recharge-modal");if(t.length)t.find(".modal-body").html(e);else{let a='<div class="modal fade in" id="wpcom-recharge-modal" data-backdrop="static">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>\n                <h4 class="modal-title">\u4f59\u989d\u5145\u503c</h4>\n            </div>\n            <div class="modal-body">\n               '+e+"\n            </div>\n        </div>\n    </div>\n</div>";jQuery("body").append(a),t=jQuery("#wpcom-recharge-modal")}t.modal("show");const a=this;jQuery.ajax({url:_wpmx_js.ajaxurl,data:{action:"wpcom_recharge_modal"},method:"POST",dataType:"json",success(e){e.result&&-1==e.result?(jQuery(document).trigger("wpcom_not_login"),setTimeout((()=>{t.modal("hide"),jQuery("#login-modal").modal()}),180)):e.tpl?(t.find(".modal-body").html(e.tpl),a.select_type()):(t.modal("hide"),e.msg&&wpcom_notice({message:e.msg,type:"warning",show:1500}))},error(){t.modal("hide"),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}})},select_type(e){let t=jQuery(".recharge-types-list .recharge-types-item");void 0===e&&t.length&&(e=t.eq(0).data("type")),e&&(t.removeClass("active"),jQuery(".recharge-types-list .recharge-types-item[data-type="+e+"]").addClass("active"),jQuery(".recharge-form").removeClass("active"),jQuery(".recharge-form.recharge-form-"+e).addClass("active"))},for_t1(e,t){if(e&&/^[0-9]+.?[0-9]*/.test(e)&&e>0){let a=t.find("[type=submit]");if(a.hasClass("loading"))return!1;a.loading(1),jQuery.ajax({url:_wpmx_js.ajaxurl,data:{action:"wpcom_recharge_data",value:e,nonce:t.find("[name=recharge_form_t1_nonce]").val()},method:"POST",dataType:"json",success(e){a.loading(0),0==e.result?(jQuery(document).trigger("pay.wpcom",e),t.closest(".modal").modal("hide")):e.msg&&wpcom_notice({message:e.msg,type:"warning",show:1500})},error(){a.loading(0),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}})}else wpcom_notice({message:""===e?"\u8bf7\u8f93\u5165\u5145\u503c\u91d1\u989d":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5145\u503c\u91d1\u989d",type:"warning",show:1500})},for_t2(e,t){if(console.log(e,"for_t2"),e&&/^[a-zA-Z0-9_-]{6,64}$/.test(e)){let a=t.find("[type=submit]");if(a.hasClass("loading"))return!1;a.loading(1),jQuery.ajax({url:_wpmx_js.ajaxurl,data:{action:"wpcom_recharge_voucher",value:e,nonce:t.find("[name=recharge_form_t2_nonce]").val()},method:"POST",dataType:"json",success(e){a.loading(0),0==e.result?(t.closest(".modal").modal("hide"),wpcom_notice({message:"\u5151\u6362\u6210\u529f\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u67e5\u770b\u6700\u65b0\u4f59\u989d\uff01",type:"success",show:3e3})):e.msg&&wpcom_notice({message:e.msg,type:"warning",show:2e3})},error(){a.loading(0),wpcom_notice({message:"\u8bf7\u6c42\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",type:"error",show:1500})}})}else wpcom_notice({message:""===e?"\u8bf7\u8f93\u5165\u4ee3\u91d1\u5238\u5238\u7801":"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u4ee3\u91d1\u5238\u5238\u7801",type:"warning",show:1500})}};a.default=o},{}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o={init:function(){const e=this;jQuery((function(t){e.$=t,e.load_content(),t(".hidden-content-wrap").on("click",".j-refresh-hidden-content",(function(){const a=t(this);a.addClass("loading"),e.load_content((function(){a.removeClass("loading")}))})).on("click",".hidden-content-btn-password",(function(){const a=t(this).parent();let o=a.find('input[name="password"]').val();if(o){let t=a.closest(".hidden-content-wrap").attr("id");e.load_content((function(e){void 0===e[t]&&wpcom_notice({message:"\u89e3\u9501\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u53e3\u4ee4\u662f\u5426\u6b63\u786e",type:"warning",show:1800})}),o,t)}else a.addClass("error")})).on("input change",'.hidden-content-input input[name="password"]',(function(){t(this).parent().removeClass("error")}))}))},load_content:function(e,t,a){const o=this.$,i=o(".wp-block-wpcom-hidden-content .hidden-content-wrap");if(i.length){i.addClass("loading");let s="undefined"!=typeof _wpcom_js&&_wpcom_js.post_id?_wpcom_js:_wpmx_js;0===i.find(".hidden-content-loading").length&&i.append('<i class="wpcom-icon wi hidden-content-loading"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i>');let n={post_id:s.post_id?s.post_id:"",action:"wpcom_get_hidden_content"};t&&(n.password=t,n.id=a),o.ajax({url:s.ajaxurl,data:n,method:"POST",dataType:"json",success:function(t){if(t)for(let e in t){let a=o("#"+e).parent();a.html(t[e]),a.find(".j-map").length&&o(document).trigger("wpcom.map"),a.find(".wp-block-wpcom-accordion").length&&a.find(".wp-block-wpcom-accordion").collapse("show"),o(document).trigger("wpcom.lightbox",[a]),/^post-hidden-content-[\d]+$/.test(e)&&o(".entry-content .wpcom-unlock-more").remove(),a.find(".wp-block-wpcom-hljs > pre").length&&a.find(".wp-block-wpcom-hljs > pre").trigger("hljs.wpcom")}i.removeClass("loading"),e&&e(t)},error:function(){i.removeClass("loading"),e&&e()}})}}};a.default=o},{}]},{},[1]);