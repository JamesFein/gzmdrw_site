!function t(e,i,o){function r(n,s){if(!i[n]){if(!e[n]){var c="function"==typeof require&&require;if(!s&&c)return c(n,!0);if(a)return a(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var d=i[n]={exports:{}};e[n][0].call(d.exports,(function(t){return r(e[n][1][t]||t)}),d,d.exports,t,e,i,o)}return i[n].exports}for(var a="function"==typeof require&&require,n=0;n<o.length;n++)r(o[n]);return r}({1:[function(t,e,i){"use strict";var o;(o=jQuery).fn.qrcode=function(t){var e;function i(t){this.mode=e,this.data=t}function r(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function a(t,e){if(null==t.length)throw Error(t.length+"/"+e);for(var i=0;i<t.length&&0==t[i];)i++;this.num=Array(t.length-i+e);for(var o=0;o<t.length-i;o++)this.num[o]=t[o+i]}function n(t,e){this.totalCount=t,this.dataCount=e}function s(){this.buffer=[],this.length=0}i.prototype={getLength:function(){return this.data.length},write:function(t){for(var e=0;e<this.data.length;e++)t.put(this.data.charCodeAt(e),8)}},r.prototype={addData:function(t){this.dataList.push(new i(t)),this.dataCache=null},isDark:function(t,e){if(0>t||this.moduleCount<=t||0>e||this.moduleCount<=e)throw Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){var t=1;for(t=1;40>t;t++){for(var e=n.getRSBlocks(t,this.errorCorrectLevel),i=new s,o=0,r=0;r<e.length;r++)o+=e[r].dataCount;for(r=0;r<this.dataList.length;r++)e=this.dataList[r],i.put(e.mode,4),i.put(e.getLength(),c.getLengthInBits(e.mode,t)),e.write(i);if(i.getLengthInBits()<=8*o)break}this.typeNumber=t}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,e){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[i][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),7<=this.typeNumber&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=r.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(t,e){for(var i=-1;7>=i;i++)if(!(-1>=t+i||this.moduleCount<=t+i))for(var o=-1;7>=o;o++)-1>=e+o||this.moduleCount<=e+o||(this.modules[t+i][e+o]=0<=i&&6>=i&&(0==o||6==o)||0<=o&&6>=o&&(0==i||6==i)||2<=i&&4>=i&&2<=o&&4>=o)},getBestMaskPattern:function(){for(var t=0,e=0,i=0;8>i;i++){this.makeImpl(!0,i);var o=c.getLostPoint(this);(0==i||t>o)&&(t=o,e=i)}return e},createMovieClip:function(t,e,i){for(t=t.createEmptyMovieClip(e,i),this.make(),e=0;e<this.modules.length;e++){i=1*e;for(var o=0;o<this.modules[e].length;o++){var r=1*o;this.modules[e][o]&&(t.beginFill(0,100),t.moveTo(r,i),t.lineTo(r+1,i),t.lineTo(r+1,i+1),t.lineTo(r,i+1),t.endFill())}}return t},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=0==t%2);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=0==t%2)},setupPositionAdjustPattern:function(){for(var t=c.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var i=0;i<t.length;i++){var o=t[e],r=t[i];if(null==this.modules[o][r])for(var a=-2;2>=a;a++)for(var n=-2;2>=n;n++)this.modules[o+a][r+n]=-2==a||2==a||-2==n||2==n||0==a&&0==n}},setupTypeNumber:function(t){for(var e=c.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var o=!t&&1==(e>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=o}for(i=0;18>i;i++)o=!t&&1==(e>>i&1),this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=o},setupTypeInfo:function(t,e){for(var i=c.getBCHTypeInfo(this.errorCorrectLevel<<3|e),o=0;15>o;o++){var r=!t&&1==(i>>o&1);6>o?this.modules[o][8]=r:8>o?this.modules[o+1][8]=r:this.modules[this.moduleCount-15+o][8]=r}for(o=0;15>o;o++)r=!t&&1==(i>>o&1),8>o?this.modules[8][this.moduleCount-o-1]=r:9>o?this.modules[8][15-o-1+1]=r:this.modules[8][15-o-1]=r;this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var i=-1,o=this.moduleCount-1,r=7,a=0,n=this.moduleCount-1;0<n;n-=2)for(6==n&&n--;;){for(var s=0;2>s;s++)if(null==this.modules[o][n-s]){var l=!1;a<t.length&&(l=1==(t[a]>>>r&1)),c.getMask(e,o,n-s)&&(l=!l),this.modules[o][n-s]=l,-1==--r&&(a++,r=7)}if(0>(o+=i)||this.moduleCount<=o){o-=i,i=-i;break}}}},r.PAD0=236,r.PAD1=17,r.createData=function(t,e,i){e=n.getRSBlocks(t,e);for(var o=new s,a=0;a<i.length;a++){var l=i[a];o.put(l.mode,4),o.put(l.getLength(),c.getLengthInBits(l.mode,t)),l.write(o)}for(a=t=0;a<e.length;a++)t+=e[a].dataCount;if(o.getLengthInBits()>8*t)throw Error("code length overflow. ("+o.getLengthInBits()+">"+8*t+")");for(o.getLengthInBits()+4<=8*t&&o.put(0,4);0!=o.getLengthInBits()%8;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*t||(o.put(r.PAD0,8),o.getLengthInBits()>=8*t));)o.put(r.PAD1,8);return r.createBytes(o,e)},r.createBytes=function(t,e){for(var i=0,o=0,r=0,n=Array(e.length),s=Array(e.length),l=0;l<e.length;l++){var d=e[l].dataCount,h=e[l].totalCount-d;o=Math.max(o,d),r=Math.max(r,h),n[l]=Array(d);for(var u=0;u<n[l].length;u++)n[l][u]=255&t.buffer[u+i];for(i+=d,u=c.getErrorCorrectPolynomial(h),d=new a(n[l],u.getLength()-1).mod(u),s[l]=Array(u.getLength()-1),u=0;u<s[l].length;u++)h=u+d.getLength()-s[l].length,s[l][u]=0<=h?d.get(h):0}for(u=l=0;u<e.length;u++)l+=e[u].totalCount;for(i=Array(l),u=d=0;u<o;u++)for(l=0;l<e.length;l++)u<n[l].length&&(i[d++]=n[l][u]);for(u=0;u<r;u++)for(l=0;l<e.length;l++)u<s[l].length&&(i[d++]=s[l][u]);return i},e=4;for(var c={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){for(var e=t<<10;0<=c.getBCHDigit(e)-c.getBCHDigit(c.G15);)e^=c.G15<<c.getBCHDigit(e)-c.getBCHDigit(c.G15);return(t<<10|e)^c.G15_MASK},getBCHTypeNumber:function(t){for(var e=t<<12;0<=c.getBCHDigit(e)-c.getBCHDigit(c.G18);)e^=c.G18<<c.getBCHDigit(e)-c.getBCHDigit(c.G18);return t<<12|e},getBCHDigit:function(t){for(var e=0;0!=t;)e++,t>>>=1;return e},getPatternPosition:function(t){return c.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,i){switch(t){case 0:return 0==(e+i)%2;case 1:return 0==e%2;case 2:return 0==i%3;case 3:return 0==(e+i)%3;case 4:return 0==(Math.floor(e/2)+Math.floor(i/3))%2;case 5:return 0==e*i%2+e*i%3;case 6:return 0==(e*i%2+e*i%3)%2;case 7:return 0==(e*i%3+(e+i)%2)%2;default:throw Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new a([1],0),i=0;i<t;i++)e=e.multiply(new a([1,l.gexp(i)],0));return e},getLengthInBits:function(t,i){if(1<=i&&10>i)switch(t){case 1:return 10;case 2:return 9;case e:case 8:return 8;default:throw Error("mode:"+t)}else if(27>i)switch(t){case 1:return 12;case 2:return 11;case e:return 16;case 8:return 10;default:throw Error("mode:"+t)}else{if(!(41>i))throw Error("type:"+i);switch(t){case 1:return 14;case 2:return 13;case e:return 16;case 8:return 12;default:throw Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),i=0,o=0;o<e;o++)for(var r=0;r<e;r++){for(var a=0,n=t.isDark(o,r),s=-1;1>=s;s++)if(!(0>o+s||e<=o+s))for(var c=-1;1>=c;c++)0>r+c||e<=r+c||0==s&&0==c||n==t.isDark(o+s,r+c)&&a++;5<a&&(i+=3+a-5)}for(o=0;o<e-1;o++)for(r=0;r<e-1;r++)a=0,t.isDark(o,r)&&a++,t.isDark(o+1,r)&&a++,t.isDark(o,r+1)&&a++,t.isDark(o+1,r+1)&&a++,(0==a||4==a)&&(i+=3);for(o=0;o<e;o++)for(r=0;r<e-6;r++)t.isDark(o,r)&&!t.isDark(o,r+1)&&t.isDark(o,r+2)&&t.isDark(o,r+3)&&t.isDark(o,r+4)&&!t.isDark(o,r+5)&&t.isDark(o,r+6)&&(i+=40);for(r=0;r<e;r++)for(o=0;o<e-6;o++)t.isDark(o,r)&&!t.isDark(o+1,r)&&t.isDark(o+2,r)&&t.isDark(o+3,r)&&t.isDark(o+4,r)&&!t.isDark(o+5,r)&&t.isDark(o+6,r)&&(i+=40);for(r=a=0;r<e;r++)for(o=0;o<e;o++)t.isDark(o,r)&&a++;return i+10*(t=Math.abs(100*a/e/e-50)/5)}},l={glog:function(t){if(1>t)throw Error("glog("+t+")");return l.LOG_TABLE[t]},gexp:function(t){for(;0>t;)t+=255;for(;256<=t;)t-=255;return l.EXP_TABLE[t]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},d=0;8>d;d++)l.EXP_TABLE[d]=1<<d;for(d=8;256>d;d++)l.EXP_TABLE[d]=l.EXP_TABLE[d-4]^l.EXP_TABLE[d-5]^l.EXP_TABLE[d-6]^l.EXP_TABLE[d-8];for(d=0;255>d;d++)l.LOG_TABLE[l.EXP_TABLE[d]]=d;return a.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=Array(this.getLength()+t.getLength()-1),i=0;i<this.getLength();i++)for(var o=0;o<t.getLength();o++)e[i+o]^=l.gexp(l.glog(this.get(i))+l.glog(t.get(o)));return new a(e,0)},mod:function(t){if(0>this.getLength()-t.getLength())return this;for(var e=l.glog(this.get(0))-l.glog(t.get(0)),i=Array(this.getLength()),o=0;o<this.getLength();o++)i[o]=this.get(o);for(o=0;o<t.getLength();o++)i[o]^=l.gexp(l.glog(t.get(o))+e);return new a(i,0).mod(t)}},n.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],n.getRSBlocks=function(t,e){var i=n.getRsBlockTable(t,e);if(null==i)throw Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=i.length/3,r=[],a=0;a<o;a++)for(var s=i[3*a+0],c=i[3*a+1],l=i[3*a+2],d=0;d<s;d++)r.push(new n(c,l));return r},n.getRsBlockTable=function(t,e){switch(e){case 1:return n.RS_BLOCK_TABLE[4*(t-1)+0];case 0:return n.RS_BLOCK_TABLE[4*(t-1)+1];case 3:return n.RS_BLOCK_TABLE[4*(t-1)+2];case 2:return n.RS_BLOCK_TABLE[4*(t-1)+3]}},s.prototype={get:function(t){return 1==(this.buffer[Math.floor(t/8)]>>>7-t%8&1)},put:function(t,e){for(var i=0;i<e;i++)this.putBit(1==(t>>>e-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},"string"==typeof t&&(t={text:t}),t=o.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},t),this.each((function(){var e;if("canvas"==t.render){(e=new r(t.typeNumber,t.correctLevel)).addData(t.text),e.make();var i=document.createElement("canvas");i.width=t.width,i.height=t.height;for(var a=i.getContext("2d"),n=t.width/e.getModuleCount(),s=t.height/e.getModuleCount(),c=0;c<e.getModuleCount();c++)for(var l=0;l<e.getModuleCount();l++){a.fillStyle=e.isDark(c,l)?t.foreground:t.background;var d=Math.ceil((l+1)*n)-Math.floor(l*n),h=Math.ceil((c+1)*n)-Math.floor(c*n);a.fillRect(Math.round(l*n),Math.round(c*s),d,h)}}else for((e=new r(t.typeNumber,t.correctLevel)).addData(t.text),e.make(),i=o("<table></table>").css("width",t.width+"px").css("height",t.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",t.background),a=t.width/e.getModuleCount(),n=t.height/e.getModuleCount(),s=0;s<e.getModuleCount();s++)for(c=o("<tr></tr>").css("height",n+"px").appendTo(i),l=0;l<e.getModuleCount();l++)o("<td></td>").css("width",a+"px").css("background-color",e.isDark(s,l)?t.foreground:t.background).appendTo(c);e=i,jQuery(e).appendTo(this)}))}},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=function(){var t=arguments.length,e=arguments[0]||{};"object"!=typeof e&&"function"!=typeof e&&(e={}),1==t&&(e=this,i--);for(var i=1;i<t;i++){var o=arguments[i];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},r=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType};const a=function(t){this.options=o({},a.DEFAULTS,t)},n=["sea","city","fruit","nature","animal","experimental","mountains"];a.DEFAULTS={width:280,height:155,PI:Math.PI,sliderL:42,sliderR:8,offset:8,loadingText:"\u6b63\u5728\u52a0\u8f7d\u4e2d...",failedText:"\u518d\u8bd5\u4e00\u6b21",barText:"\u5411\u53f3\u6ed1\u52a8\u586b\u5145\u62fc\u56fe",maxLoadCount:3,localImages:function(t){return _wpmx_js.plugin_url+"images/placeholder.jpg"}};var s=a.prototype;s.init=function(){this.initModal(),this.show(),this.$element=document.getElementById(this.options.id),this.$element.style.position="relative",this.$element.style.width=this.options.width+"px",this.$element.style.margin="0 auto",this.initDOM(),this.initData()},s.initDOM=function(){var t=function(t,e){var i=document.createElement(t);return i.className=e,i},e=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i}(this.options.width,this.options.height);e.className="captcha-canvas";var i=e.cloneNode(!0),a=t("div","captcha-slider"),n=this.createIcon("refresh","captcha-slider-refresh"),s=t("div","captcha-slider-mask"),c=t("div","captcha-slider-bg"),l=t("div","captcha-slider-btn"),d=this.createIcon("arrow-right-2","captcha-slider-icon"),h=t("span","captcha-slider-text");const u=this.createIcon("loader","captcha-loading");i.className="captcha-block",h.innerHTML=this.options.barText;var m=this.$element;m.appendChild(e),m.appendChild(u),m.appendChild(n),m.appendChild(i),l.appendChild(d),s.appendChild(l),a.appendChild(c),a.appendChild(s),a.appendChild(h),m.appendChild(a);var p={canvas:e,block:i,sliderContainer:a,refreshIcon:n,slider:l,sliderMask:s,sliderIcon:d,text:h,canvasCtx:e.getContext("2d"),blockCtx:i.getContext("2d")};r(Object.assign)?Object.assign(this,p):o(this,p)},s.initData=function(){let t=jQuery("#wpcom-captcha-modal").width();if(t&&t<500){let e=Math.round(.92*t)-30;e&&e<this.options.width&&(this.options.height=Math.round(e/this.options.width*this.options.height),this.options.width=e,this.$element.style.width=e+"px",this.canvas.width=e,this.canvas.height=this.options.height)}const e={width:this.options.width,height:this.options.height,sliderL:this.options.sliderL,sliderR:this.options.sliderR,offset:this.options.offset,page:window.location.href};let i=encodeURI(JSON.stringify(e));i=window.btoa(i).split("").reverse().join(""),jQuery.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_captcha",str:window.btoa(i)}}).done((t=>{t&&"0"==t.result?(t.image&&(this.options.setSrc=function(){return t.image}),this.options.callback&&this.options.callback(t),this.time=t.time,t.str&&this.parseStr(t),this.img?(this.text.setAttribute("data-text",this.text.textContent),this.text.textContent=this.options.loadingText,this.img.setSrc()):(this.initImg(),this.bindEvents())):t.msg&&(wpcom_alert(t.msg),this.hide())})).fail((t=>{setTimeout((()=>{wpcom_alert("\u4eba\u673a\u9a8c\u8bc1\u7ec4\u4ef6\u52a0\u8f7d\u51fa\u9519"),this.hide()}),200)}))},s.initImg=function(){var t=this,e=window.navigator.userAgent.indexOf("Trident")>-1,i=this.options.sliderL+2*this.options.sliderR+3,o=function(i,o){var r=t.options.sliderL,a=t.options.sliderR,n=t.options.PI,s=t.x,c=t.y;i.beginPath(),i.moveTo(s,c),i.arc(s+r/2,c-a+2,a,.72*n,2.26*n),i.lineTo(s+r,c),i.arc(s+r+a-2,c+r/2,a,1.21*n,2.78*n),i.lineTo(s+r,c+r),i.lineTo(s,c+r),i.arc(s+a-2,c+r/2,a+.4,2.76*n,1.24*n,!0),i.lineTo(s,c),i.lineWidth=1,i.fillStyle="rgba(10, 10, 10, 0.7)",i.strokeStyle="rgba(255, 255, 255, 0.8)",i.stroke(),i[o](),i.globalCompositeOperation=e?"xor":"destination-over"};const a=new Image;a.crossOrigin="Anonymous";var s=0;a.onload=function(){t.drag=!0,o(t.canvasCtx,"fill"),o(t.blockCtx,"clip");let e=t.coverImg(t.options.width-2,t.options.height,a.width,a.height);t.canvasCtx.drawImage(a,e.sx,e.sy,e.sWidth,e.sHeight,0,0,t.options.width-2,t.options.height),t.blockCtx.drawImage(a,e.sx,e.sy,e.sWidth,e.sHeight,0,0,t.options.width-2,t.options.height);var r=t.y-2*t.options.sliderR-1,n=t.blockCtx.getImageData(t.x-3,r,i,i);t.block.width=i,t.blockCtx.putImageData(n,0,r+1),t.text.textContent=t.text.getAttribute("data-text"),jQuery(t.$element).find(".captcha-loading").hide()},a.onerror=function(){if(s++,"file:"===window.location.protocol&&(s=t.options.maxLoadCount,console.error("can't load pic resource file from File protocal. Please try http or https")),s>=t.options.maxLoadCount)return t.text.textContent="\u52a0\u8f7d\u5931\u8d25",void t.classList.add("text-danger");a.src=t.options.localImages(t.options)},a.setSrc=function(){var i="";if(s=0,t.text.classList.remove("text-danger"),r(t.options.setSrc)&&(i=t.options.setSrc()),!i||""===i){let e=Math.floor(Math.random()*n.length);i="https://source.unsplash.com/random/"+2*t.options.width+"x"+2*t.options.height+"/?"+n[e]}if(e){var o=new XMLHttpRequest;o.onloadend=function(t){var e=new FileReader;e.readAsDataURL(t.target.response),e.onloadend=function(t){a.src=t.target.result}},o.open("GET",i),o.responseType="blob",o.send()}else a.src=i},a.setSrc(),this.text.setAttribute("data-text",this.options.barText),this.text.textContent=this.options.loadingText,this.img=a},s.coverImg=function(t,e,i,o){var r=0,a=0,n=i,s=o;return i>o||i==o&&t<e?r=(i-(n=t*s/e))/2:(i<o||i==o&&t>e)&&(a=(o-(s=e*n/t))/2),{sx:r,sy:a,sWidth:n,sHeight:s}},s.clean=function(){this.canvasCtx.clearRect(0,0,this.options.width,this.options.height),this.blockCtx.clearRect(0,0,this.options.width,this.options.height),this.block.width=this.options.width},s.parseStr=function(t){if(t.str){let e=window.atob(t.str.split("").reverse().join(""));e=e.replace(/@$/,"").split("").reverse().join("");let i=e.split(t.nonce);i&&(this.x=Number(i[0]),this.y=Number(i[1]))}},s.bindEvents=function(){var t=this;this.$element.addEventListener("selectstart",(function(){return!1})),this.refreshIcon.addEventListener("click",(function(){t.text.textContent=t.options.barText,t._reset(),r(t.options.onRefresh)&&t.options.onRefresh.call(t.$element)}));var e,i,o=[],a=!1,n=function(o){o.preventDefault(),o.stopPropagation(),t.drag&&!t.text.classList.contains("text-danger")&&(e=o.clientX||o.touches[0].clientX,i=o.clientY||o.touches[0].clientY,a=!0)},s=function(r){if(!a)return!1;var n=r.clientX||r.touches[0].clientX,s=r.clientY||r.touches[0].clientY,c=n-e,l=s-i;if(c<0||c+40>t.options.width)return!1;t.slider.style.left=c-1+"px";var d=(t.options.width-40-20)/(t.options.width-40)*c;t.block.style.left=d+"px",t.sliderContainer.classList.add("captcha-active"),t.sliderMask.style.width=c+4+"px",o.push(Math.round(l))},c=function(i){if(!a)return!1;a=!1;var n=i.clientX||i.changedTouches[0].clientX;if(n===e)return!1;t.sliderContainer.classList.remove("captcha-active"),t.trail=o;var s=t.verify();t.slider.removeChild(document.querySelector(".captcha-slider-icon"));let c=null;s.spliced&&s.verified?(c=t.createIcon("dagou","captcha-slider-icon"),t.sliderContainer.classList.add("captcha-success"),r(t.options.onSuccess)&&t.options.onSuccess.call(t,Object.assign(s,{eventX:n,originX:e}))):(c=t.createIcon("close","captcha-slider-icon"),t.sliderContainer.classList.add("captcha-fail"),r(t.options.onFail)&&t.options.onFail.call(t.$element),setTimeout((function(){t.text.innerHTML=t.options.failedText,t._reset()}),1e3)),t.slider.appendChild(c)};this.slider.addEventListener("mousedown",n),this.slider.addEventListener("touchstart",n),document.addEventListener("mousemove",s),document.addEventListener("touchmove",s),document.addEventListener("mouseup",c),document.addEventListener("touchend",c),document.addEventListener("mousedown",(function(){return!1})),document.addEventListener("touchstart",(function(){return!1})),document.addEventListener("swipe",(function(){return!1}))},s.verify=function(){var t,e=this.trail,i=parseInt(this.block.style.left),o=function(t,e){return t+e},r=e.reduce(o)/e.length,a=e.map((function(t){return t-r}));return t=0!==Math.sqrt(a.map((function(t){return t*t})).reduce(o)/e.length),{spliced:Math.abs(i-this.x)<this.options.offset,verified:t}},s._reset=function(){this.drag=!1,jQuery(this.$element).find(".captcha-loading").show(),this.sliderContainer.classList.remove("captcha-fail"),this.sliderContainer.classList.remove("captcha-success"),this.slider.style.left=0,this.block.style.left=0,this.sliderMask.style.width=0,this.slider.removeChild(document.querySelector(".captcha-slider-icon"));let t=this.createIcon("arrow-right-2","captcha-slider-icon");this.slider.appendChild(t),this.clean(),this.initData()},s.createIcon=function(t,e){var i=document.createElement("i");i.className="wpcom-icon wi "+e;var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("aria-hidden","true"),o.setAttribute("aria-hidden","true");var r=document.createElementNS("http://www.w3.org/2000/svg","use");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#wi-"+t),o.appendChild(r),i.appendChild(o),i},s.initModal=function(){let t=jQuery("#wpcom-captcha-modal");if(t.length)this.img=null,t.find("#wpcom-captcha").html("");else{let t='<div class="modal fade modal-captcha" id="wpcom-captcha-modal" data-backdrop="static">\n            <div class="modal-dialog modal-sm">\n                <div class="modal-content">                   <div class="modal-header"><div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div><h4 class="modal-title">'+_wpmx_js._Captcha.title+'</h4></div>\n                   <div class="modal-body"><div class="wpcom-captcha-wrap" id="wpcom-captcha"></div></div>\n                </div>\n            </div>\n        </div>';jQuery("body").append(t)}},s.show=function(){jQuery("#wpcom-captcha-modal").modal("show")},s.hide=function(){jQuery("#wpcom-captcha-modal").modal("hide")};var c=function(t){return new a("object"==typeof t&&t)};i.default=c},{}],3:[function(t,e,i){"use strict";var o,r=(o=t("./lib/slidercaptcha.js"))&&o.__esModule?o:{default:o};t("./jquery.qrcode.min");let a={},n=null,s=null,c=null,l=null;jQuery((function(t){let e=0,i=null;function o(){if(t(".member-form-login.member-form-login-qr").length&&j("qr"),/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)||t(".j-login-switcher").show(),void 0!==_wpmx_js.noCaptcha&&t(".j-NC").length){let i;i="cn"!=_wpmx_js.noCaptcha.language?"//aeis.alicdn.com/sd/ncpc/nc.js?t=2015052012":"//g.alicdn.com/sd/ncpc/nc.js?t=2015052012",e?d():t.getScript(i,d)}else if(void 0!==_wpmx_js.TCaptcha&&t(".j-TCaptcha").length){let i="https://ssl.captcha.qq.com/TCaptcha.js";t(".j-TCaptcha").addClass("ready"),e?h():t.getScript(i,h)}else if(void 0!==_wpmx_js.hCaptcha&&t(".h-captcha").length){let i="https://js.hcaptcha.com/1/api.js?render=explicit&onload=captcha_onload";e?setTimeout((function(){u(0)}),100):t.getScript(i)}else if(void 0!==_wpmx_js.reCAPTCHA&&t(".g-recaptcha").length){let i="https://www.google.com/recaptcha/api.js?render=explicit&onload=captcha_onload";e?setTimeout((function(){u(1)}),100):t.getScript(i)}else void 0!==_wpmx_js._Captcha&&t(".w-captcha").length&&(e=1,t(".captcha-button").addClass("ready"),l=(0,r.default)({id:"wpcom-captcha",width:390,height:200,barText:_wpmx_js._Captcha.barText,failedText:_wpmx_js._Captcha.failedText,loadingText:_wpmx_js._Captcha.loadingText,callback(e){let i=window.btoa(e.time+":"+e.nonce);i=i.split("").reverse().join(""),t(".j-ticket").val(i)},onSuccess(e){if(this.trail){let i=JSON.stringify(Object.assign(e,{trail:this.trail.length,time:this.time,page:window.location.href})),o=window.btoa(i);o=(this.time+"").split("").reverse().join("")+o.split("").reverse().join(""),o=window.btoa(o).split("").reverse().join(""),t(".j-randstr").val(o)}t("._Captcha .captcha-button").addClass("success").find("span").text(_wpmx_js.captcha_verified),setTimeout((()=>{this.hide()}),300)}}),l.reset=function(){t(".j-ticket").val(""),t(".j-randstr").val(""),t("._Captcha .captcha-button").removeClass("success").find("span").text(_wpmx_js.captcha_label)},t(document).off("click._Captcha").on("click._Captcha","._Captcha > .captcha-button",(function(){if(t(this).hasClass("success"))return!1;l.init()})))}function d(){e=1;let i=[_wpmx_js.noCaptcha.appkey,(new Date).getTime(),Math.random()].join(":"),o={appkey:_wpmx_js.noCaptcha.appkey,scene:void 0!==_wpmx_js.noCaptcha.scene?_wpmx_js.noCaptcha.scene:"nc_login",token:i,language:_wpmx_js.noCaptcha.language,customWidth:"auto",callback:function(e){t(".j-Ncsessionid").val(e.csessionid),t(".j-Nsig").val(e.sig),t(".j-Ntoken").val(i),t(".j-Nscene").val(void 0!==_wpmx_js.noCaptcha.scene?_wpmx_js.noCaptcha.scene:"nc_login"),t(".j-errmsg").slideUp(80)}};t(".j-NC").each((function(e,i){o.renderTo=t(i).attr("id"),a[o.renderTo]=new noCaptcha(o),a[o.renderTo].reset=function(){a[o.renderTo].reload(),t(".j-Ncsessionid").val("")}}))}function h(){e=1,n=new TencentCaptcha(_wpmx_js.TCaptcha.appid,(function(e){0===e.ret&&(t(".j-Tticket").val(e.ticket),t(".j-Trandstr").val(e.randstr),t(".j-TCaptcha").addClass("success").find("span").text(_wpmx_js.captcha_verified)),t(".j-errmsg").slideUp(80)})),n.reset=function(){t(".j-Tticket").val(""),t(".j-Trandstr").val(""),t(".j-TCaptcha").removeClass("success").find("span").text(_wpmx_js.captcha_label)},t(document).off("click.TCaptcha").on("click.TCaptcha",".j-TCaptcha",(function(){if(t(this).hasClass("success"))return!1;n.show()}))}function u(i){e=1;let o=i?".g-recaptcha":".h-captcha";const r=i?grecaptcha:hcaptcha;t(".captcha-button").addClass("ready"),t(o).each((function(){let e=t(this),o=e.data("widgetID");if(o||0===o||"0"===o)return!0;let a={sitekey:i?_wpmx_js.reCAPTCHA.sitekey:_wpmx_js.hCaptcha.sitekey,size:"invisible"};i&&(a.callback=captcha_callback,a["error-callback"]=captcha_err_callback,a["expired-callback"]=captcha_expired_callback);let n=r.render(this,a);e.data("widgetID",n)}));let a=function(){t(".captcha-button").each((function(){let e=t(this),i=e.find(o).data("widgetID");(i||0===i||"0"===i)&&r&&r.reset(i),e.removeClass("success"),e.removeClass("loading"),e.find("span").text(_wpmx_js.captcha_label)}))};i?(c={},c.reset=a):(s={},s.reset=a),t(document).off("click.captcha").on("click.captcha",".captcha-button",(function(){const e=t(this);if(e.hasClass("success")||e.hasClass("loading"))return!1;e.addClass("loading");const a=e.find(o).data("widgetID");(a||0===a||"0"===a)&&(i?(r.execute(a),t("iframe").each((function(){let e=t(this),i=e.attr("src");if(i&&/www\.google\.com\/recaptcha\/api2\/bframe/i.test(i)){let t=e.parent().parent();t.data("flag")||(t.data("flag","1"),new MutationObserver((function(){0==t.get(0).style.opacity&&""===grecaptcha.getResponse()&&p()})).observe(t.get(0),{attributes:!0,attributeFilter:["style"]}))}}))):r.execute(a,{async:!0}).then((i=>{let{response:o}=i;o&&(e.removeClass("loading"),e.addClass("success"),e.find("span").text(_wpmx_js.captcha_verified)),t(".j-errmsg").slideUp(80)})).catch((t=>{"challenge-closed"!==t&&wpcom_alert(t),p()})))}))}function m(t){return!(!t.find(".j-Ncsessionid")||""!=t.find(".j-Ncsessionid").val())||(!(!t.find(".j-Tticket")||""!=t.find(".j-Tticket").val())||(!(!t.find(".j-Tticket")||""!=t.find(".j-Tticket").val())||(!(!t.find(".h-captcha")||""!=t.find("[name=h-captcha-response]").val())||(!(!t.find(".g-recaptcha")||""!=t.find("[name=g-recaptcha-response]").val())||!(!t.find(".j-randstr")||""!=t.find(".j-randstr").val())))))}function p(t){let e=t&&a&&a[t]?a[t]:null;e?e.reset():n?n.reset():s?s.reset():c?c.reset():l&&l.reset()}function f(e,i){e='<i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-warning"></use></svg></i>'+e+'<div class="close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>',i?i.parent().find(".j-errmsg").html(e).slideDown(80):t(".j-errmsg").html(e).slideDown(80)}function g(){let t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?i:3&i|8).toString(16)}))}function w(e,o,r){if(t("#wechat-qrcode-modal").length)t("#j-wechat-login-text").html("\u8bf7\u4f7f\u7528"+(1===r?"<b>\u5fae\u4fe1\u626b\u7801\u5e76\u5173\u6ce8</b>":"\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801")+"\u767b\u5f55").attr("style",""),v(t("#j-wechat-login-code"),e,r);else{let o='<div class="modal fade in" id="wechat-qrcode-modal" data-backdrop="static">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></button>\n                <h4 class="modal-title">\u5fae\u4fe1\u767b\u5f55</h4>\n            </div>\n            <div class="modal-body wechat-qrcode-body">\n                <p id="j-wechat-login-code"></p>\n                <p id="j-wechat-login-text">\u8bf7\u4f7f\u7528'+(1===r?"<b>\u5fae\u4fe1\u626b\u7801\u5e76\u5173\u6ce8</b>":"\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801")+"\u767b\u5f55</p>\n            </div>\n        </div>\n    </div>\n</div>";t("body").append(o),v(t("#j-wechat-login-code"),e,r),t("#wechat-qrcode-modal").on("hide.bs.modal",(function(){clearInterval(i)}))}t("#wechat-qrcode-modal").modal("show"),x(o,r,t("#j-wechat-login-text"))}function v(t,e,i){/^data:image/i.test(e)?t.html('<img src="'+e+'">'):2===i&&0==e?t.html('<img src="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTUxMiAyMDYuNzY1Yy0xNjguMjggMC0zMDUuMjM1IDEzNi45NTQtMzA1LjIzNSAzMDUuMjM1UzM0My43MTkgODE3LjIzNSA1MTIgODE3LjIzNSA4MTcuMjM1IDY4MC4yODEgODE3LjIzNSA1MTIgNjgwLjI4MSAyMDYuNzY1IDUxMiAyMDYuNzY1em0wIDU3MC4yNjRjLTE0Ni4xIDAtMjY1LjAyOS0xMTguOTA5LTI2NS4wMjktMjY1LjAyOVMzNjUuODggMjQ2Ljk3MSA1MTIgMjQ2Ljk3MSA3NzcuMDI5IDM2NS44OCA3NzcuMDI5IDUxMiA2NTguMTIgNzc3LjAyOSA1MTIgNzc3LjAyOXoiIGZpbGw9IiM5OTkiLz48cGF0aCBkPSJNNjYzLjc0MiAzNzEuMjE2YTc5LjcyIDc5LjcyIDAgMCAwLTExMi4xNjcgMzYuMTc0TDQzNy4yNyA1OTYuOTc1bC0xLjI2MyAyLjM4M2EzOS44MiAzOS44MiAwIDAgMS0yMy42ODggMjEuNzc0IDM5LjQ1MyAzOS40NTMgMCAwIDEtNTAuMjQ4LTQ4LjcyYzUuNjQyLTE4LjI5IDIyLjQ4Ni0yMS4wNjEgNTkuNjk5LTIzLjA1N2wyLjc5LS4xNjNhMjAuMTAzIDIwLjEwMyAwIDAgMC0yLjEzOS00MC4xNDVsLTIuNzA5LjE2M2MtMzYuMzM2IDEuOTE0LTgxLjU1MyA0LjM3OS05Ni4wMzUgNTEuNDI5YTc5Ljc4MiA3OS43ODIgMCAwIDAgMzYuNTYgOTIuMjA2IDgwLjI5IDgwLjI5IDAgMCAwIDY0Ljg1MyA2LjUxOCA3OS43MiA3OS43MiAwIDAgMCA0Ny4yOTQtNDIuNjFMNTg2LjY5IDQyNy4wMDRsMS4yNjItMi4zODNhMzkuODIgMzkuODIgMCAwIDEgMjMuNjg4LTIxLjc3MyAzOS40NTMgMzkuNDUzIDAgMCAxIDUwLjI0OCA0OC43MmMtNS42NDIgMTguNDMzLTIyLjY0OSAyMS4xNDItNjAuMTY3IDIzLjEzOGwtMi4yMi4wODJjLTExLjEyLjU1LTE5LjYzNSAxMC4wMi0xOS4wODUgMjEuMTQyczEwLjAyMSAxOS43MTYgMjEuMTQyIDE5LjA4NGwyLjIyLS4wODFjMzYuNTYtMS45MTUgODIuMDQzLTQuMjE2IDk2LjU4NS01MS40MyAxMC43MzQtMzUuMjk3LTQuNjAzLTc0LjA3OC0zNi42NDItOTIuMjg3eiIgZmlsbD0iIzk5OSIvPjwvc3ZnPg==">'):t.html("").qrcode({text:e}),"0"==e&&t.append('<div class="wechat-qrcode-loading"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-loader"></use></svg></i></div>')}function j(e){if(/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent))return t(".member-form-wrap.member-form-login").removeClass("member-form-login-qr").addClass("member-form-login-pc"),!1;const o=t(".member-form-qr");if("qr"===e){o.closest(".member-form-inner").find(".member-social-list").height()<20&&o.closest(".member-form-inner").find(".member-form-social").hide();let e=o.data("type");if("wechat"===e){let i=t(".member-social-list .social-item.social-"+e+" a").attr("href")+"&from=scan&timestarp="+Date.parse(new Date);o.html('<iframe class="member-form-qr-iframe" src="'+i+'"></iframe>')}else if("weapp"===e){let e=g();v(o.find(".member-form-qr-img"),0,2),o.find(".member-form-qr-text").html("\u8bf7\u4f7f\u7528\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801\u767b\u5f55").attr("style",""),t.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_weapp_qrcode",uuid:e},success:function(t){!t.qrcode||"0"!==t.result&&0!==t.result?(o.find(".wechat-qrcode-loading").remove(),o.find(".member-form-qr-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(i)):(v(o.find(".member-form-qr-img"),t.qrcode,2),x(e,2,o.find(".member-form-qr-text")))}})}else if("wechat2"===e){let r=g(),a=_wpmx_js&&_wpmx_js.wechat_follow,n=a?"0":t(".member-social-list .social-item.social-"+e+" a").attr("href")+"&uuid="+r;v(o.find(".member-form-qr-img"),n,a?1:0),o.find(".member-form-qr-text").html("\u8bf7\u4f7f\u7528"+(a?"<b>\u5fae\u4fe1\u626b\u7801\u5e76\u5173\u6ce8</b>":"\u5fae\u4fe1\u626b\u63cf\u4e8c\u7ef4\u7801")+"\u767b\u5f55").attr("style",""),a?t.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_wechat2_qrcode",uuid:r},success:function(t){"0"===t.result||0===t.result?(v(o.find(".member-form-qr-img"),t.url,1),x(r,1,o.find(".member-form-qr-text"))):(o.find(".wechat-qrcode-loading").remove(),o.find(".member-form-qr-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(i))}}):x(r,0,o.find(".member-form-qr-text"))}}else o.closest(".member-form-inner").find(".member-form-social").show(),clearInterval(i)}function x(e,o,r){clearInterval(i);let a=!1;i=setInterval((function(){a||(a=!0,t.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_wechat2_login_check",uuid:e,type:o||0},success:function(t){a=!1,"0"==t.result?(clearInterval(i),window.location.href=t.redirect_to):"2"==t.result&&(clearInterval(i),r.text("\u6388\u6743\u9519\u8bef\uff0c\u8bf7\u5237\u65b0\u9875\u9762\u91cd\u8bd5\uff01").css("color","red"))},error:function(){a=!1}}))}),2e3)}t(document).on("input change",".j-member-form .is-input",(function(e){(navigator.userAgent.indexOf("Chrome")>-1&&void 0!==e.originalEvent.data||-1==navigator.userAgent.indexOf("Chrome"))&&(t(this).closest(".form-group,.member-account-item").removeClass("error"),t(".j-errmsg").slideUp(80))})).on("click",".j-errmsg .close",(function(){t(this).closest(".j-errmsg").slideUp(80)})).on("focus",".j-member-form .is-input",(function(){t(this).closest(".form-group,.member-account-item").addClass("active")})).on("blur",".j-member-form .is-input",(function(){t(this).closest(".form-group,.member-account-item").removeClass("active")})).on("click",".j-member-form .j-send-sms-code",(function(){const e=t(this);if(e.hasClass("disabled")||e.hasClass("loading"))return!1;const i=e.closest("form");let o=e.data("target"),r=!1,a=t("input[name="+o+"]");if(("email"==a.data("rule")?/\S+@\S+\.\S+/:/^1[3|4|5|6|7|8|9][0-9]{9}$/).test((a.length?a.val():"").trim())||i.hasClass("j-no-phone-form")?m(i)&&(r=!0,f(void 0!==_wpmx_js.errors?_wpmx_js.errors.captcha_verify:"",i)):(r=!0,a.closest(".member-account-item").addClass("error"),f(void 0!==_wpmx_js.errors?_wpmx_js.errors[a.data("rule")]:"",i)),!r){let o=e.text();e.text("\u53d1\u9001\u4e2d...").loading(1);let r=i.find(".j-NC").length?i.find(".j-NC").attr("id"):null;t.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:i.serialize()+"&action=wpcom_send_sms_code",success:function(t){if(e.text(o).loading(0),1===t.result){var a=60;e.addClass("disabled").text(a+"s \u540e\u91cd\u8bd5");let t=setInterval((function(){a--,e.text(a+"s \u540e\u91cd\u8bd5"),a<1&&(clearInterval(t),e.removeClass("disabled").text(o))}),1e3)}else-2===t.result?(p(r),f(void 0!==_wpmx_js.errors?_wpmx_js.errors.captcha_fail:"",i)):t.error&&(p(r),f(t.error,i))},error:function(){p(r),e.text(o).loading(0),f(void 0!==_wpmx_js.errors?_wpmx_js.errors.req_error:"",i)}})}})).on("click",".member-form-social .social-wechat2 a,.member-account-form a.j-social-bind.wechat2",(function(e){if(!/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)){e.preventDefault(),t.fn.tooltip&&t(this).tooltip("hide");let o=g();w(_wpmx_js.wechat_follow?"0":t(this).attr("href")+"&uuid="+o,o,_wpmx_js.wechat_follow?1:0),_wpmx_js.wechat_follow&&t.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_wechat2_qrcode",uuid:o},success:function(e){"0"===e.result||0===e.result?w(e.url,o,1):(t("#j-wechat-login-code").find(".wechat-qrcode-loading").remove(),t("#j-wechat-login-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(i))}})}})).on("click",".member-form-social .social-weapp a,.member-account-form a.j-social-bind.weapp",(function(e){e.preventDefault(),t.fn.tooltip&&t(this).tooltip("hide");let o=g();w(0,o,2),t.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:{action:"wpcom_weapp_qrcode",uuid:o},success:function(e){"0"===e.result||0===e.result?(w(e.qrcode,o,2),e.url&&(window.location.href=e.url)):(t("#j-wechat-login-code").find(".wechat-qrcode-loading").remove(),t("#j-wechat-login-text").text("\u4e8c\u7ef4\u7801\u83b7\u53d6\u9519\u8bef\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5").css("color","red"),clearInterval(i))}})})).on("click",".member-form-social .social-wechat a,.member-account-form a.j-social-bind.wechat",(function(e){e.preventDefault(),t.fn.tooltip&&t(this).tooltip("hide");let i=t(this).attr("href")+"&timestarp="+Date.parse(new Date);if(t("#wechat-iframe-modal").length)t("#wechat-iframe-modal").find(".wechat-login-iframe").attr("src",i);else{let e='<div class="modal fade in" id="wechat-iframe-modal" data-backdrop="static">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-header" style="padding: 10px;">\n                <div class="close" data-dismiss="modal" aria-label="Close"><i class="wpcom-icon wi"><svg aria-hidden="true"><use xlink:href="#wi-close"></use></svg></i></div>\n            </div>\n            <div class="modal-body wechat-iframe-body">\n                <iframe class="wechat-login-iframe" src="'+i+'"></iframe>\n            </div>\n        </div>\n    </div>\n</div>';t("body").append(e),t("#wechat-iframe-modal").on("hide.bs.modal",(function(){t("#wechat-iframe-modal").find(".wechat-login-iframe").attr("src","about:blank")}))}t("#wechat-iframe-modal").modal("show")})).on("submit",".j-member-form",(function(e){e.preventDefault();const i=t(this),o=i.find("button[type=submit]");o.loading(1),i.find(".form-group .is-input").attr("autocomplete","off");let r=!1,a=i.find(".form-group .require, .member-account-item .require");if(a.length&&a.each((function(){let e=t(this);e.length&&""==e.val().trim()&&(e.closest(".form-group, .member-account-item").addClass("error"),r=!0)})),r||i.find(".form-group, .member-account-item").find(".is-input").each((function(){const e=t(this);let o=e.data("rule"),a=e.val();if(o){let n=o.split(" ");t.each(n,(function(t,o){let n=o.split(":"),s=n[0],c=void 0!==n[1]?n[1]:"",l="";switch(s){case"email":l=/\S+@\S+\.\S+/,l.test(a)||(r=!0,f(void 0!==_wpmx_js.errors?_wpmx_js.errors.email:"",i));break;case"password":c&&i.find(".form-group input[name="+c+"]").val()!=a?(r=!0,f(void 0!==_wpmx_js.errors?_wpmx_js.errors.passcheck:"",i)):""==c&&(a.length<6||a.length>32)&&(r=!0,f(void 0!==_wpmx_js.errors?_wpmx_js.errors.password:"",i));break;case"phone":l=/^1[3-9]{1}\d{9}$/,l.test(a)||(r=!0,f(void 0!==_wpmx_js.errors?_wpmx_js.errors.phone:"",i));break;case"terms":e.is(":checked")||(r=!0,f(void 0!==_wpmx_js.errors?_wpmx_js.errors.terms:"",i));break;case"sms_code":l=/^[0-9]{6}$/,6===a.length&&l.test(a)||(r=!0,f(void 0!==_wpmx_js.errors?_wpmx_js.errors.sms_code:"",i))}if(r)return e.closest(".form-group,.member-account-item").addClass("error"),!1;e.closest(".form-group,.member-account-item").removeClass("error")}))}if(r)return!1})),r)o.loading(0);else{let e=i.find(".j-NC").length?i.find(".j-NC").attr("id"):null;if(m(i))f(void 0!==_wpmx_js.errors?_wpmx_js.errors.captcha_verify:"",i),o.loading(0);else{let r=t(this).attr("id");r=r.replace(/-form/i,""),t.ajax({url:_wpmx_js.ajaxurl,type:"POST",dataType:"json",data:i.serialize()+"&action=wpcom_"+r,success:function(t){if(void 0!==t.result&&"1"==t.result){if(location.search.indexOf("interim-login=1")>-1)window.parent.jQuery("#wp-auth-check-wrap").addClass("hidden"),window.parent.jQuery("body").removeClass("modal-open"),window.parent.jQuery(window).off("beforeunload.wp-auth-check");else{var r=function(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e||location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}("redirect_to");void 0!==t.redirect_to?window.location.href=t.redirect_to:r?window.location.href=r:window.location.reload()}o.loading(0)}else void 0!==t.error?(f(t.error,i),o.loading(0),p(e)):(o.loading(0),p(e))},error:function(){o.loading(0),p(e),f(void 0!==_wpmx_js.errors?_wpmx_js.errors.req_error:"",i)}})}}})).on("click",".j-login-switcher",(function(){const e=t(this);let i=e.data("type");i=i||"qr";let o="qr"===i?"pc":"qr";e.data("type",o).find(".wpcom-icon").html('<svg aria-hidden="true"><use xlink:href="#wi-login-'+o+'"></use></svg>'),e.closest(".member-form-wrap").removeClass("member-form-login-"+o).addClass("member-form-login-"+i),j(i)})).on("init_captcha",o),o(),window.captcha_onload=function(){e=1,u(void 0!==_wpmx_js.reCAPTCHA?1:0)},window.captcha_callback=function(e){e&&t('[name="g-recaptcha-response"]').each((function(){let i=t(this);if(i.val()===e)return i.closest(".captcha-button").removeClass("loading").addClass("success").find("span").text(_wpmx_js.captcha_verified),!1})),t(".j-errmsg").slideUp(80)},window.captcha_err_callback=function(){wpcom_alert("The reCAPTCHA encounters an error (usually network connectivity)"),p()},window.captcha_expired_callback=function(){wpcom_alert("The reCAPTCHA response expires and you needs to re-verify"),p()},window.is_load_login=!0}))},{"./jquery.qrcode.min":1,"./lib/slidercaptcha.js":2}]},{},[3]);